% Update 5/12/2024
\vfil\penalty-200\vfilneg
\section{Thảo luận và Mở rộng}

\subsection{Nhận xét dữ liệu}
\begin{itemize}
    \item  Trong mô hình tổng quan, có những cột dữ liệu không tuân theo phân phối chuẩn như \textbf{order\_total} và \textbf{order\_price}. Điều này có thể do sự hiện diện của các giá trị ngoại lai hoặc phân phối không đồng nhất.
    \item Phương sai không đồng nhất , có thể do sự biến động lớn trong giá trị đơn hàng giữa các mùa. 
    \item Có những cột phụ thuộc với nhau, ví dụ \textbf{order\_price} ảnh hưởng bởi \textbf{coupon\_discount}.

\end{itemize}

\subsection{Tính bao quát}

Nhóm đã phân tích các yếu tố ảnh những ảnh hưởng đến sự thay đổi của dữ liệu, cũng như phân tích và kiểm định trong từng trường hợp như sau:
Các kiểm định được chọn phù hợp với mục tiêu và đặc điểm dữ liệu (không chuẩn, không đồng nhất phương sai, có cặp). Ngoài ra, nhóm cũng mở rộng bằng kiểm định phi tham số Krustal Wallis, do đó, phân tích được đánh giá là có tính bao quát tốt và hợp lý về mặt phương pháp.
Cụ thể các phương pháp đã được nhóm sử dụng như sau: 
\begin{itemize}
    \item Phân tích 1 mẫu với \textbf{z-test}
    \item Phân tích 2 mẫu với \textbf{t-test}
    \item Phân tích Anova \textbf bằng {Krustal-Wallis}
    \item Phân tích hồi quy tuyến tính
\end{itemize}
\subsection{Điểm mạnh và điểm yếu của các phương pháp đã sử dụng}

\begin{table}[H]
\centering
\caption{Tổng hợp ưu điểm và nhược điểm của các phương pháp kiểm định}
\label{tab:summary_tests}
\renewcommand{\arraystretch}{1} % Giãn dòng trong bảng
\begin{tabular}{|p{3.2cm}|p{5.5cm}|p{5.5cm}|}
    
\hline
\textbf{Phương pháp} & \textbf{Ưu điểm} & \textbf{Nhược điểm} \\ \hline
% 1 mẫu
\textbf{Z-test một mẫu} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
\item Dễ hiểu và triển khai.
    \item Hiệu quả với cỡ mẫu lớn (n > 30).
    \item Không yêu cầu phân phối chuẩn nhờ định lý giới hạn trung tâm.
\end{itemize} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
    \item Giả định dữ liệu độc lập, mẫu đại diện.
    \item Không phù hợp với cỡ mẫu nhỏ.
\end{itemize} \\ \hline
% 2 mẫu
\textbf{T-test hai mẫu (Welch)} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
    \item So sánh hai nhóm độc lập.
    \item Không yêu cầu phương sai bằng nhau.
\end{itemize} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
    \item Nhạy cảm với ngoại lai nếu dữ liệu không chuẩn.
    \item Cần số lượng mẫu đủ lớn nếu phân phối không chuẩn.
\end{itemize} \\ \hline
% Anova
\textbf{Anova 1 yếu tố}&
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
    \item  Dễ hiểu và thực hiện
    \item Có khả năng mở rộng hay kết hợp với các kiểm định bổ sung như Tukey's HSD để xác định cụ thể nhóm nào khác biệt.
\end{itemize} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
    \item Yêu cầu tổng thể có phân phối chuẩn.
    \item Không chỉ ra cặp nhóm nào khác biệt.
    \item Cần kiểm định hậu nghiệm (như Dunn Test).
\end{itemize} \\ \hline

% Hồi quy tuyến tính
\textbf{Phương pháp OLS trong hồi quy tuyến tính} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep=0pt, parsep=0pt, itemsep=0pt]
    \item Dễ hiểu, tính toán nhanh, nhiều công cụ kiểm định, nền tảng lý thuyết vững
\end{itemize} &
\begin{itemize}[leftmargin=*, topsep=0pt, partopsep =0pt, parsep=0pt, itemsep=0pt]
    \item Nhạy cảm với ngoại lai, cần giả định chặt chẽ, không xử lý tốt dữ liệu phi tuyến, đa cộng tuyến làm mất ổn định
\end{itemize} \\ \hline 

\end{tabular}
\end{table}

\subsection{Mối quan hệ giữa mục tiêu và phương pháp được chọn}

Mục tiêu chính của nghiên cứu không phải là dự đoán giá trị, mà là kiểm tra xem các yếu tố như mùa vụ, đặc điểm sản phẩm hay hành vi mua hàng có tạo ra sự khác biệt có ý nghĩa thống kê về giá trị đơn hàng hay không. 

Nhóm lựa chọn các phương pháp sau:
\begin{enumerate}
    \item \textbf{Z-test một mẫu}: kiểm tra sự khác biệt giữa trung bình mẫu và giá trị giả thuyết.
    \item \textbf{T-test hai mẫu (Welch)}: so sánh trung bình của hai nhóm độc lập khi phương sai không đồng nhất.
    \item \textbf{ANOVA một yếu tố}: kiểm tra sự khác biệt trung bình giữa nhiều nhóm; nếu có ý nghĩa thống kê, mở rộng thêm \textbf{Dunn test} để xác định cặp nhóm khác biệt.
    \item \textbf{Hồi quy tuyến tính}: phân tích tác động của biến độc lập lên biến phụ thuộc và đánh giá mức độ giải thích của mô hình.
\end{enumerate}

Việc lựa chọn trên đảm bảo phù hợp với đặc điểm dữ liệu, đáp ứng mục tiêu so sánh sự khác biệt và phân tích mối quan hệ, thay vì thuần túy dự đoán.
\subsection{Mở rộng với phương pháp Kruskal-Wallis}
\begin{boxH}
    Nguyên lý của phương pháp Kruskal-Wallis
\begin{itemize}
    \item Sắp xếp tất cả các quan sát từ nhỏ đến lớn và gán thứ hạng (rank).
    \item Tính tổng thứ hạng cho từng nhóm.
    \item So sánh sự khác biệt tổng thứ hạng giữa các nhóm để đánh giá liệu các nhóm có xuất phát từ cùng một phân phối hay không.
\end{itemize}
\end{boxH}

Lí do nhóm chọn \textbf{Kruskal-Wallis} là vì:
\begin{itemize}
    \item Dữ liệu không tuân theo phân phối chuẩn và có phương sai không đồng nhất.
    \item Kruskal-Wallis là phương pháp phi tham số, không yêu cầu giả định phân phối chuẩn.
    \item Phù hợp để so sánh nhiều nhóm độc lập, đặc biệt khi dữ liệu không đáp ứng giả định của ANOVA.
\end{itemize}
\subsection{Thực hiện trong R}
\begin{lstlisting}[language=R, caption={Phép kiểm Kruskal–Wallis trong R}]
kruskal_result <- kruskal.test(order_price ~ season, data = merged_data)
# Hiển thị kết quả
print(kruskal_result)
\end{lstlisting}

\begin{lstlisting}[language=R, caption={Kết quả kiểm định Kruskal-Wallis trong R}]
	Kruskal-Wallis rank sum test
data:  order_price by season
Kruskal-Wallis chi-squared = 2.2004, df = 3, p-value = 0.5319
\end{lstlisting}

\textbf{Kết quả:} Kiểm định Kruskal–Wallis cho thấy $\chi^2 = 2.2004$, df $= 3$, p-value $= 0.5319$. 
Vì p-value lớn hơn mức ý nghĩa 0.05, ta không bác bỏ giả thuyết gốc. 
Điều này nghĩa là chưa có bằng chứng thống kê để kết luận giá trị \texttt{order\_price} khác biệt giữa các mùa.

\input{Sections/7_Nguon_Du_Lieu_R}